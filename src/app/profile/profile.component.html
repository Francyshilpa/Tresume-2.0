<div class="header p-4">
  <div class="container-fluid">
    <div class="row main pt-3 pl-2">
      <h2>USER PROFILE</h2>
    </div>
    <!-- 
      <button class="btn">Change Password</button>
    </div> -->
    <div class="col mt-2 text-right">
    <button type="button" class="btn" data-toggle="modal" data-target="#exampleModal">
      Change Password
    </button>
  </div>
    <div class="row pt-2">
      <div class="col-md-3">
        <div class="card card-outline text-center p-4">
          <div class="text-center">
          </div>
          <h2 class="card-title text-center pt-3 mb-0">{{profiledata.FirstName}} {{profiledata.LastName}}</h2>
          <p class="card-text text-center pt-1 JD">{{profiledata.Title}}</p>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card card-outline p-4">
          <h2>About Me</h2>
          <div class="row">
            <div class="col-md-4">
              <span class="label" for="firstName">First Name</span><br>
              <ng-container *ngIf="!editmode; else editModeTemplate9">
                <span class="m-2">{{profiledata.FirstName}}</span>
              </ng-container>
              <ng-template #editModeTemplate9>
                <input type="text" class="custom-input" id="firstName"
                   name="firstName" [(ngModel)]="profiledata.FirstName" value="{{profiledata.FirstName}}">
              </ng-template>
            </div>
            <div class="col-md-4">
              <span class="label" for="middleName">Middle Name</span><br>
              <ng-container *ngIf="!editmode; else editModeTemplate1">
                <span class="m-2">{{profiledata.MiddleName}}</span>
              </ng-container>
              <ng-template #editModeTemplate1>
                <input type="text" class="custom-input" id="middleName" value="{{profiledata.MiddleName}}"
                   name="middleName" [(ngModel)]="profiledata.MiddleName" >
              </ng-template>
            </div>
            <div class="col-md-4">
              <span class="label" for="lastName">Last Name</span><br>
              <ng-container *ngIf="!editmode; else editModeTemplate2">
                <span class="m-2">{{profiledata.LastName}}</span>
              </ng-container>
              <ng-template #editModeTemplate2>
                <input type="text" class="custom-input" id="lastName" value="{{profiledata.LastName}}"
                   name="lastName" [(ngModel)]="profiledata.LastName">
              </ng-template>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-4">
              <span class="label" for="userName">User Name</span><br>
                <span class="m-2">{{profiledata.UserName}}</span>
            </div>
            <div class="col-md-4">
              <span class="label" for="yearsOfExperience">Years of Experience(In Months)</span><br>
              <ng-container *ngIf="!editmode; else editModeTemplate4">
                <span class="m-2">{{profiledata.YearsOfExpInMonths}}</span>
              </ng-container>
              <ng-template #editModeTemplate4>
                <input class="custom-input" type="text" id="yearsOfExperience" [(ngModel)]="profiledata.YearsOfExpInMonths" name="yearsOfExperience" required placeholder="Enter YOE">
              </ng-template>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-4">
              <span class="label" for="title">Title</span><br>
              <ng-container *ngIf="!editmode;else editModeTemplate10">
                <span class="m-2">{{profiledata.Title}}</span>
              </ng-container>
              <ng-template #editModeTemplate10>
                <input type="text" class="custom-input" id="title" value="{{profiledata.Title}}"
                  name="title" [(ngModel)]="profiledata.Title" required>
                
              </ng-template>
            </div>
            <div class="col-md-4">
              <span class="label" for="dob">DOB</span><br>
              <ng-container *ngIf="!editmode;else editModeTemplate7">
                <span class="m-2">{{profiledata.DOB | date:'dd-MM-yyyy'}}</span></ng-container>
              <ng-template #editModeTemplate7>
                <input type="date" class="custom-input" id="dob" name="dob" [value]="profiledata.DOB | date:'yyyy-MM-dd'" (input)="updateDOB($event)" required>
              </ng-template>
            </div>
            <div class="col-md-4">
              <span class="label" for="phoneNumber">Phone</span><br>
              <ng-container *ngIf="!editmode;else editModeTemplate8">
                <span class="m-2">{{profiledata.PhoneNumber}}</span>
              </ng-container>
              <ng-template #editModeTemplate8>
                <input type="text" class="custom-input" id="phoneNumber" value="{{profiledata.PhoneNumber}}" [(ngModel)]="profiledata.PhoneNumber" name="phoneNumber" pattern="[0-9]{10}" required>
              </ng-template>
            </div>
          </div>
          <h2 class="mt-4">Company Information</h2>
          <div class="form-row">
            <div class="form-group col-4">
              <span class="label" for="companyName">Organization</span><br>
              <span *ngIf="!editmode" class="m-2" [(ngModel)]="profiledata.Organization">{{profiledata.Organization}}</span>
            </div>
            <!-- <div class="form-group col-6">
              <span class="label" for="logo">Logo Type</span><br>
              <span *ngIf="!editmode" class="m-2">Image.png</span>
              <div *ngIf="editmode" class="logo">
                <div class="custom-file">
                  <input type="file" class="custom-file-input" id="logo" (change)="onFileSelected($event)">
                  <span class="custom-file-label" for="logo">Choose file</span>
                </div>
                <div class="mt-2">
                  <img src="{{ logoImageUrl }}" alt="Selected Logo" *ngIf="logoImageUrl" width="50" height="50">
                </div>
              </div>
            </div> -->
          </div>
          <div class="form-row mt-2">
            <div class="form-group col-4">
              <span class="label" for="state">State</span><br>
              <span *ngIf="!editmode">{{profiledata.state}}</span>
              <select *ngIf="editmode" class="custom-input" id="state" [(ngModel)]="selectedstate" (change)="fetchCity()">
                <option [value]="profiledata.state" selected>{{profiledata.state}}</option>
                <option *ngFor="let stateObj of state" [value]="stateObj.state">{{stateObj.state}}</option>
              </select>
            </div>
            
            <div class="form-group col-4">
              <span class="label" for="city">City</span><br>
              <span *ngIf="!editmode">{{profiledata.City}}</span>
              <select *ngIf="editmode" class="custom-input" id="city"[(ngModel)]="selectedcity">
              <option value="" selected>Select City</option>
                <option *ngFor="let city of city" [value]="city.city">{{city.city}}</option>
              </select>
            </div>
            <div class="form-group col-4">
              <span class="label" for="zipcode">Zip Code</span><br>
              <span *ngIf="!editmode">{{profiledata.zipcode}}</span>
              <input *ngIf="editmode" type="text" class="custom-input" id="zipcode" value="{{profiledata.zipcode}}" [(ngModel)]="profiledata.zipcode">
            </div>
          </div>
          <div *ngIf="editmode; else" class="row mt-4">
            <div class="col text-right">
              <button class="btn m-2" (click)="cancel()">Cancel</button>
              <button class="btn m-2" (click)="updateProfile()">Save</button>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-1">
        <i class='fas fa-pen' (click)="cancel()"></i>
      </div>
    </div>
  </div>
</div>
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>



<!-- password-change-modal.component.html -->
<div class="modal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Change Password</h2>
        <button type="button" class="close"  data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group d-flex">
            <label for="oldPassword" class="col-md-4 mt-2">Old Password</label>
            <input type="password" class="form-control password-custom" id="oldPassword" placeholder="Enter old password">
          </div>
          <div class="form-group d-flex">
            <label for="newPassword" class="col-md-4 mt-2">New Password</label>
            <input type="password" class="form-control password-custom" id="newPassword" placeholder="Enter new password">
          </div>
          <div class="form-group d-flex">
            <label for="confirmPassword" class="col-md-4 mt-2">Confirm Password</label>
            <input type="password" class="form-control password-custom" id="confirmPassword" placeholder="Confirm new password">
          </div>
        </form>
      </div>
      <div class="modal-footer">        
        <button type="button" class="btn" data-dismiss="modal">Close</button>
        <button type="button" class="btn" data-dismiss="modal"(click)="SavePassword()">Save</button>
      </div>
    </div>
  </div>
</div>

